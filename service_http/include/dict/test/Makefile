###########################################################################
# Automatically generated by comake (1.0.1)  							  #
###########################################################################

#################设计系统参数#######################################
WORKROOT	?=	../../../
IDLCC	:=	$(WORKROOT)/public/idlcompiler/output/bin/mcy
RPCCC :=  $(WORKROOT)/public/ubrpc/output/bin/ubrpcgen
CC	:=	gcc
CXX	:=	g++
LEX	:=	flex
YACC	:= yacc
CFLAGS	:=	-pipe -Wall -W -g -fPIC
CXXFLAGS	:=	-pipe -Wall -W -g -fPIC -O2 -Wall -g
LEXFLAGS	:=	
YACCFLAGS	:=	
IDLFLAGS	:=  
LINKFLAGS	:=  -rdynamic
LINK	:=	g++
AR	:=	ar cqs
RANLIB	:=	
COMAKE	:=	comake

###############baidu lib 的32位 64位支持#################
HARDWARE_PLATFORM := $(shell uname -m)
ifeq ($(HARDWARE_PLATFORM),x86_64)
	lib2=lib2-64
	third=third-64
else
	lib2=lib2
	third=third
endif
##########################################

# 编译参数
DEP_INCPATH =  -I$(WORKROOT)/libsrc/ullib/output//include/
DEP_LDFLAGS =  -L$(WORKROOT)/libsrc/ullib/output//lib/
DEP_LDLIBS = -lullib
INCPATH =  -I. -I. -I..
MAKDEP = Makefile.dep


#start target
first : all

############# 默认推到公式
.SUFFIXES: .c .cpp .cc .cxx .C .idl .des
.PRECIOUS: %.cpp

.cpp.o:
	$(CXX) -c -o $@ $<  $(CXXFLAGS) $(CPPFLAGS) $(INCPATH)

.cc.o:
	$(CXX) -c -o $@ $<  $(CXXFLAGS) $(CPPFLAGS) $(INCPATH)

.cxx.o:
	$(CXX) -c -o $@ $<  $(CXXFLAGS) $(CPPFLAGS) $(INCPATH)

.C.o:
	$(CXX) -c -o $@ $<  $(CXXFLAGS) $(CPPFLAGS) $(INCPATH)

.c.o:
	$(CC) -c -o $@ $<  $(CFLAGS) $(CPPFLAGS) $(INCPATH)

.idl.cpp:
	$(IDLCC) --ns=$(*F) -o $* $< $(CPPFLAGS) $(INCPATH) $(IDLFLAGS)

#############
###cpp 支持
%info : %
	ccp $<
#############


#__$MAKEFILE_RULES$__



###############编译目标
all :  target output 
.PHONY : all clean test output comake src conf 

target : test_sign rand_string 
#target : rpcidl test_sign rand_string 
#target : 
#__$target_CMDLINE$__

rpcidl : 

clean_rpcidl : 


test : 


comake :
	-make clean
	-comake 

#-include $(MAKDEP)
-include $(MAKDEP)

#----------------build target : test_sign--------------------

test_sign : CC := gcc
test_sign : CXX := g++
test_sign : CXXFLAGS := -pipe -Wall -W -g -fPIC -O2 -Wall -g
test_sign : CPPFLAGS := -DVERSION=\"1.0.0.0\" -DLINUX -D_REENTRANT
test_sign : IDLFLAGS := 
test_sign : CFLAGS := -pipe -Wall -W -g -fPIC
test_sign : INCPATH :=  -I. -I. -I.. $(DEP_INCPATH)
test_sign : LDLIBS := -lcrypto -lm -lpthread -L.. -luldict -lpthread -lullib -lcrypto -lm $(DEP_LDLIBS)
test_sign : LDFLAGS :=  $(DEP_LDFLAGS)
test_sign : LINKFLAGS := -rdynamic

test_sign_SOURCES := $(wildcard comake_autogen.cpp test_sign.cpp)
#test_sign_HEADERS := $(wildcard *.h)
test_sign_HEADERS := *.h
test_sign_IDLSRC := $(wildcard __$IDLSRC_VALUE$__)
test_sign_IDLSRCCPP := $(patsubst %.idl,%.cpp, $(test_sign_IDLSRC))
test_sign_IDLSRCH := $(patsubst %.idl,%.h, $(test_sign_IDLSRC))
test_sign_CONFDES := $(wildcard __$CONFDES$_VALUE$__ test_sign.des)
test_sign_CONFRANGE := $(patsubst %.des,%.range, $(test_sign_CONFDES))
test_sign_OBJS := $(test_sign_IDLSRC:.idl=.o)
test_sign_OBJS += $(test_sign_SOURCES:.c=.o)
test_sign_OBJS := $(test_sign_OBJS:.cc=.o)
test_sign_OBJS := $(test_sign_OBJS:.cpp=.o)
test_sign_OBJS := $(test_sign_OBJS:.cxx=.o)
test_sign_OBJS := $(test_sign_OBJS:.C=.o)
test_sign_OBJS := $(test_sign_OBJS:.idl=.o)
test_sign_OBJS := $(test_sign_OBJS:.yacc=.o)
test_sign_OBJS := $(test_sign_OBJS:.lex=.o)
test_sign : $(test_sign_OBJS) 
	@echo "force_clean"
	$(foreach n, $(wildcard ), $(if ifeq($(suffix $(n)), .c), $(CC) -c -o $(basename $(n)).o $(n) $(CXXFLAGS) $(CPPFLAGS) $(INCPATH);  , $(CXX) -c -o $(basename $(n)).o $(n) $(CXXFLAGS) $(CPPFLAGS) $(INCPATH); ))
	@`for x in $(test_sign_CONFDES);do cpp -C -o test_sign.range $$x $(CPPFLAGS) $(INCPATH);mkdir -p conf;cp test_sign.range conf/; done`
	$(LINK) $^ -o $@ -Xlinker "-(" $(LDFLAGS) $(LDLIBS) $(LINKFLAGS) -Xlinker "-)"


define test_sign_output
	mkdir -p output
	mkdir -p output/bin
	cp -rf test_sign output/bin
	`if [ -e "conf" ];then cp -rf conf output/ ;fi`

endef
	

define test_sign_clean
	-rm -rf $(test_sign_OBJS) $(test_sign_IDLSRCCPP) $(test_sign_IDLSRCH) test_sign.range conf/test_sign.range
	-rm -rf test_sign
	-rm -rf output
	-rm -rf ccp_output.error   ccp_output_scm.xml  ccp_output.xml ccp_output.pclint  ccp_output.txt
endef
	

define test_sign_ccpc
	ccp $(test_sign_SOURCES) --formatter vim
endef
	

define test_sign_cov
	
endef
	



#---------------------end build target : test_sign------------------

#----------------build target : rand_string--------------------

rand_string : CC := gcc
rand_string : CXX := g++
rand_string : CXXFLAGS := -pipe -Wall -W -g -fPIC -O2 -Wall -g
rand_string : CPPFLAGS := -DVERSION=\"1.0.0.0\" -DLINUX -D_REENTRANT
rand_string : IDLFLAGS := 
rand_string : CFLAGS := -pipe -Wall -W -g -fPIC
rand_string : INCPATH :=  -I. -I. -I.. $(DEP_INCPATH)
rand_string : LDLIBS := -lcrypto -lm -lpthread -L.. -luldict -lpthread -lullib -lcrypto -lm $(DEP_LDLIBS)
rand_string : LDFLAGS :=  $(DEP_LDFLAGS)
rand_string : LINKFLAGS := -rdynamic

rand_string_SOURCES := $(wildcard comake_autogen.cpp rand_string.c)
#rand_string_HEADERS := $(wildcard *.h)
rand_string_HEADERS := *.h
rand_string_IDLSRC := $(wildcard __$IDLSRC_VALUE$__)
rand_string_IDLSRCCPP := $(patsubst %.idl,%.cpp, $(rand_string_IDLSRC))
rand_string_IDLSRCH := $(patsubst %.idl,%.h, $(rand_string_IDLSRC))
rand_string_CONFDES := $(wildcard __$CONFDES$_VALUE$__ rand_string.des)
rand_string_CONFRANGE := $(patsubst %.des,%.range, $(rand_string_CONFDES))
rand_string_OBJS := $(rand_string_IDLSRC:.idl=.o)
rand_string_OBJS += $(rand_string_SOURCES:.c=.o)
rand_string_OBJS := $(rand_string_OBJS:.cc=.o)
rand_string_OBJS := $(rand_string_OBJS:.cpp=.o)
rand_string_OBJS := $(rand_string_OBJS:.cxx=.o)
rand_string_OBJS := $(rand_string_OBJS:.C=.o)
rand_string_OBJS := $(rand_string_OBJS:.idl=.o)
rand_string_OBJS := $(rand_string_OBJS:.yacc=.o)
rand_string_OBJS := $(rand_string_OBJS:.lex=.o)
rand_string : $(rand_string_OBJS) 
	@echo "force_clean"
	$(foreach n, $(wildcard ), $(if ifeq($(suffix $(n)), .c), $(CC) -c -o $(basename $(n)).o $(n) $(CXXFLAGS) $(CPPFLAGS) $(INCPATH);  , $(CXX) -c -o $(basename $(n)).o $(n) $(CXXFLAGS) $(CPPFLAGS) $(INCPATH); ))
	@`for x in $(rand_string_CONFDES);do cpp -C -o rand_string.range $$x $(CPPFLAGS) $(INCPATH);mkdir -p conf;cp rand_string.range conf/; done`
	$(LINK) $^ -o $@ -Xlinker "-(" $(LDFLAGS) $(LDLIBS) $(LINKFLAGS) -Xlinker "-)"


define rand_string_output
	mkdir -p output
	mkdir -p output/bin
	cp -rf rand_string output/bin
	`if [ -e "conf" ];then cp -rf conf output/ ;fi`

endef
	

define rand_string_clean
	-rm -rf $(rand_string_OBJS) $(rand_string_IDLSRCCPP) $(rand_string_IDLSRCH) rand_string.range conf/rand_string.range
	-rm -rf rand_string
	-rm -rf output
	-rm -rf ccp_output.error   ccp_output_scm.xml  ccp_output.xml ccp_output.pclint  ccp_output.txt
endef
	

define rand_string_ccpc
	ccp $(rand_string_SOURCES) --formatter vim
endef
	

define rand_string_cov
	
endef
	



#---------------------end build target : rand_string------------------

define _output
	$(test_sign_output)
	$(rand_string_output)
endef
	

define _clean
	$(test_sign_clean)
	$(rand_string_clean)
endef
	

ccpc : 
	$(test_sign_ccpc)
	$(rand_string_ccpc)

cov : 
	cov01 -1
	make clean
	make 
	cov01 -0



output : test_sign rand_string 
	$(_output)
	rm -rf $(MAKDEP)

$(MAKDEP) : $(wildcard comake_autogen.cpp test_sign.cpp rand_string.c)
	-$(CC) -MG -MM $(CPPFLAGS) $(INCPATH) $(DEP_INCPATH) $^ > $@

clean:
	$(_clean)
	rm -rf $(MAKDEP)


